# FAST BUILD VERSION — removes apt-get completely
FROM python:3.11

WORKDIR /app

# Upgrade Python tooling
RUN pip install --upgrade pip setuptools wheel

# Copy the dependencies list
COPY requirements.txt .

# Install Python dependencies (prefer wheels → faster)
RUN pip install --no-cache-dir --prefer-binary -r requirements.txt

# Copy your full backend project
COPY . .

# Start Celery worker
CMD ["celery", "-A", "rag.worker.celery_app", "worker", "--loglevel=INFO"]
